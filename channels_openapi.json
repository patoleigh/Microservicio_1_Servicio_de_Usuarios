{"openapi":"3.1.0","info":{"title":"Servicio de Canales","version":"1.0.0"},"paths":{"/v1/channels/":{"post":{"tags":["channels"],"summary":"Add Channel","description":"Crea un nuevo canal y lo guarda en MongoDB.","operationId":"add_channel_v1_channels__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelCreatePayload"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Channel"}}}},"404":{"description":"Recurso no encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"get":{"tags":["channels"],"summary":"List Channels","description":"Obtiene una lista paginada de información básica de todos los canales.","operationId":"list_channels_v1_channels__get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelBasicInfoResponse"},"title":"Response List Channels V1 Channels  Get"}}}},"404":{"description":"Recurso no encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/v1/channels/{channel_id}":{"get":{"tags":["channels"],"summary":"Read Channel","description":"Obtiene un canal existente por su ID.","operationId":"read_channel_v1_channels__channel_id__get","parameters":[{"name":"channel_id","in":"path","required":true,"schema":{"type":"string","title":"Channel Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Channel"}}}},"404":{"description":"Recurso no encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"put":{"tags":["channels"],"summary":"Modify Channel","description":"Actualiza un canal existente en MongoDB.","operationId":"modify_channel_v1_channels__channel_id__put","parameters":[{"name":"channel_id","in":"path","required":true,"schema":{"type":"string","title":"Channel Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelUpdatePayload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Channel"}}}},"404":{"description":"Recurso no encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"delete":{"tags":["channels"],"summary":"Remove Channel","description":"Desactiva un canal en MongoDB (no lo elimina físicamente).","operationId":"remove_channel_v1_channels__channel_id__delete","parameters":[{"name":"channel_id","in":"path","required":true,"schema":{"type":"string","title":"Channel Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelIDResponse"}}}},"404":{"description":"Recurso no encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict: el canal ya estaba desactivado al momento de la solicitud.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/v1/channels/{channel_id}/reactivate":{"post":{"tags":["channels"],"summary":"Reactivate Channel","description":"Reactiva un canal desactivado en MongoDB.","operationId":"reactivate_channel_v1_channels__channel_id__reactivate_post","parameters":[{"name":"channel_id","in":"path","required":true,"schema":{"type":"string","title":"Channel Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelIDResponse"}}}},"404":{"description":"Recurso no encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict: el canal ya se encuentra activo; no requiere reactivación.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/v1/channels/{channel_id}/basic":{"get":{"tags":["channels"],"summary":"Read Channel Basic Info","description":"Obtiene información básica de un canal específico desde MongoDB.","operationId":"read_channel_basic_info_v1_channels__channel_id__basic_get","parameters":[{"name":"channel_id","in":"path","required":true,"schema":{"type":"string","title":"Channel Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelBasicInfoResponse"}}}},"404":{"description":"Recurso no encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/v1/members/":{"post":{"tags":["members"],"summary":"Add User To Channel","description":"Agrega un usuario a un canal existente en MongoDB.","operationId":"add_user_to_channel_v1_members__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelUserPayload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Channel"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Recurso no encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"delete":{"tags":["members"],"summary":"Remove User From Channel","description":"Elimina un usuario de un canal existente en MongoDB.","operationId":"remove_user_from_channel_v1_members__delete","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelUserPayload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Channel"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Recurso no encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/v1/members/{user_id}":{"get":{"tags":["members"],"summary":"Read Channels By Member","description":"Obtiene todos los canales en los que un usuario es miembro desde MongoDB.","operationId":"read_channels_by_member_v1_members__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelBasicInfoResponse"},"title":"Response Read Channels By Member V1 Members  User Id  Get"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/v1/members/owner/{owner_id}":{"get":{"tags":["members"],"summary":"Read Channels By Owner","description":"Obtiene todos los canales asociados a un propietario específico desde MongoDB.","operationId":"read_channels_by_owner_v1_members_owner__owner_id__get","parameters":[{"name":"owner_id","in":"path","required":true,"schema":{"type":"string","title":"Owner Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelBasicInfoResponse"},"title":"Response Read Channels By Owner V1 Members Owner  Owner Id  Get"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/v1/members/channel/{channel_id}":{"get":{"tags":["members"],"summary":"Read Channel Member Ids","description":"Obtiene los IDs de los miembros de un canal específico desde MongoDB.","operationId":"read_channel_member_ids_v1_members_channel__channel_id__get","parameters":[{"name":"channel_id","in":"path","required":true,"schema":{"type":"string","title":"Channel Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelMember"},"title":"Response Read Channel Member Ids V1 Members Channel  Channel Id  Get"}}}},"422":{"description":"Entidad no procesable – datos o ID inválidos.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Error interno del servidor.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Recurso no encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Channel":{"properties":{"_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"name":{"type":"string","title":"Name"},"owner_id":{"type":"string","title":"Owner Id"},"users":{"items":{"$ref":"#/components/schemas/ChannelMember"},"type":"array","title":"Users"},"is_active":{"type":"boolean","title":"Is Active","default":true},"channel_type":{"$ref":"#/components/schemas/ChannelType","default":"public"},"created_at":{"type":"number","title":"Created At"},"updated_at":{"type":"number","title":"Updated At"},"deleted_at":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Deleted At"}},"type":"object","required":["name","owner_id","users","created_at","updated_at"],"title":"Channel","example":{"_id":"68f430e95055d3561d1d3167","channel_type":"public","created_at":1760833769.259725,"is_active":true,"name":"general","owner_id":"owner123","updated_at":1760833769.259725,"users":[{"id":"user1","joined_at":1760833769.259725},{"id":"user2","joined_at":1760833769.259725},{"id":"owner123","joined_at":1760833769.259725}]}},"ChannelBasicInfoResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"owner_id":{"type":"string","title":"Owner Id"},"channel_type":{"$ref":"#/components/schemas/ChannelType"},"created_at":{"type":"number","title":"Created At"},"user_count":{"type":"integer","title":"User Count"}},"type":"object","required":["id","name","owner_id","channel_type","created_at","user_count"],"title":"ChannelBasicInfoResponse","example":{"channel_type":"public","created_at":1760833769.259725,"id":"60f7c0c2b4d1c8b4f8e4d2a1","name":"general","owner_id":"owner123","user_count":5}},"ChannelCreatePayload":{"properties":{"name":{"type":"string","title":"Name"},"owner_id":{"type":"string","title":"Owner Id"},"channel_type":{"$ref":"#/components/schemas/ChannelType","default":"public"}},"type":"object","required":["name","owner_id"],"title":"ChannelCreatePayload","example":{"channel_type":"public","name":"general","owner_id":"owner123"}},"ChannelIDResponse":{"properties":{"id":{"type":"string","title":"Id"}},"type":"object","required":["id"],"title":"ChannelIDResponse","example":{"id":"60f7c0c2b4d1c8b4f8e4d2a1"}},"ChannelMember":{"properties":{"id":{"type":"string","title":"Id"},"joined_at":{"type":"number","title":"Joined At"}},"type":"object","required":["id","joined_at"],"title":"ChannelMember"},"ChannelType":{"type":"string","enum":["public","private"],"title":"ChannelType"},"ChannelUpdatePayload":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"owner_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Owner Id"},"channel_type":{"anyOf":[{"$ref":"#/components/schemas/ChannelType"},{"type":"null"}]}},"type":"object","title":"ChannelUpdatePayload","example":{"channel_type":"private","name":"random","owner_id":"owner456"}},"ChannelUserPayload":{"properties":{"channel_id":{"type":"string","title":"Channel Id"},"user_id":{"type":"string","title":"User Id"}},"type":"object","required":["channel_id","user_id"],"title":"ChannelUserPayload","example":{"channel_id":"60f7c0c2b4d1c8b4f8e4d2a1","user_id":"user123"}},"ErrorResponse":{"properties":{"detail":{"type":"string","title":"Detail"},"suggestion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggestion"}},"type":"object","required":["detail"],"title":"ErrorResponse"}}}}